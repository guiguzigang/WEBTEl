<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>事件委托</title>
</head>
<body>
<input type="button" id="btn" />
<ul id="ul">
    <li>aaaaaaaa</li>
    <li>bbbbbbbb</li>
    <li>cccccccc</li>
</ul>

<script>
    window.onload = function(){
        var oUl = document.getElementById("ul");
        var aLi = oUl.getElementsByTagName("li");
        var oBtn = document.getElementById("btn");
        var iNow = 4;
        /*
         这里要用到事件源：event 对象，事件源，不管在哪个事件中，只要你操作的那个元素就是事件源。
         ie：window.event.srcElement
         标准下:event.target
         nodeName:找到元素的标签名
         */

        oUl.onmouseover = function(ev){
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            //alert(target.innerHTML);
            if(target.nodeName.toLowerCase() == "li"){
                target.style.background = "red";
            }
        }
        oUl.onmouseout = function(ev){
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            //alert(target.innerHTML);
            if(target.nodeName.toLowerCase() == "li"){
                target.style.background = "";
            }
        }
        oBtn.onclick = function(){
            iNow ++;
            var oLi = document.createElement("li");
            oLi.innerHTML = 1111 *iNow;
            oUl.appendChild(oLi);
        }
    }
    // for循环来做，不用事件委托 新添加的元素没有添加背景颜色的效果
//    window.onload = function(){
//        var oUl = document.getElementById("ul");
//        var aLi = oUl.getElementsByTagName("li");
//        var oBtn = document.getElementById("btn");
//        var iNow = 4;
//        for(var i=0; i<aLi.length; i++){
//            aLi[i].onmouseover = function(){
//                this.style.background = "red";
//            }
//            aLi[i].onmouseout = function(){
//                this.style.background = "";
//            }
//        }
//
//        oBtn.onclick = function(){
//            iNow ++;
//            var oLi = document.createElement("li");
//            oLi.innerHTML = 1111 *iNow;
//            oUl.appendChild(oLi);
//        }
//    }
</script>
</body>
</html>